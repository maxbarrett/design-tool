<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Design Tool</title>
	<!-- <link rel="stylesheet" href="css/scaffolding.css"> -->
	<link rel="stylesheet" href="css/normalize.css">  
	<link rel="stylesheet" href="css/style.css">

</head>
<body>

<script type="text/x-handlebars" data-template-name="application">
	<header>
		<a class="brand" href="#">Design tool</a>
		<nav>
			{{#linkTo 'projects'}}Projects{{/linkTo}}
		</nav>

		{{#linkTo 'projects.new'}}Add a project{{/linkTo}}
	</header>

    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="projects">
	<div class="projects-list">
		<ul>
		{{#each model}}
			<li class="project-thumb">
				<a class="delete" {{action 'destroyRecord' this}}>x</a>
				{{#linkTo 'project' this classNames="thumb"}}
					<img {{bindAttr src="images.firstObject.uri"}}>
				{{/linkTo}}
				{{#linkTo 'project' this}}
					<h3 class="project-title">{{title}}</h3>
				{{/linkTo}}
			</li>
		{{/each}}
		</ul>
	</div>
	
	{{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="project">
	<div id="xxxoverlay" class="dark">
	
		<div class="project">
			<form {{action save on="submit"}} enctype="multipart/form-data">
			
				{{view App.InputField valueBinding="id" type="hidden" id="projid"}}
				
				{{#if isEditing}}
					{{partial 'projectFields'}}			
					<button {{action 'doneEditing'}}>Done</button>
				{{else}}
					<h1>{{title}}</h1>
					<button {{action 'edit'}}>Edit</button>
				{{/if}}
		
				<div id="vcslider-home">
					<div class="vcslider-viewport">
						<ul>
							{{#each image in images}}
							<li>
								<img {{bindAttr src="image.uri" data-img="image.id"}}>
								<a href="#" {{action 'deleteImg' image}}>Delete img</a>
							</li>
							{{else}}
							<li>No images</li>
							{{/each}}
						</ul>
					</div>
				</div>

				<button class="delete" {{action 'destroyRecord'}}>Delete project</button>
			</form>	
			<footer>
				{{#linkTo 'projects' classNames="back"}}Back{{/linkTo}}
				
				<ul class="img-nav">
				</ul>
				
			</footer>
			
		</div>
	</div>
</script>


<script type="text/x-handlebars" data-template-name="projects/new">
	<div id="overlay">
		<div class="new-project-form">
			{{#linkTo 'projects' classNames="close"}}Close{{/linkTo}}

			<form method="post" action="api/projects" enctype="multipart/form-data">
				<input type="text" name="title" placeholder="Title">
				<input type="text" name="author" placeholder="Author">
				<input type="text" name="category" placeholder="Category">
				<input type="file" name="uploadingFile" multiple="multiple">
				<button type="submit">Save project</button>
			</form>

		</div>
	</div>
</script>


<script type="text/x-handlebars" data-template-name="_projectFields">
	{{view App.TextField id="title" valueBinding="title" placeholder="Title" data-valideater="required" required="required"}}<br />
	{{view App.TextField id="author" valueBinding="author" placeholder="Author"}}<br />
	{{view App.TextField id="category" valueBinding="category" placeholder="Category"}}<br />
	{{view App.FileField id="uploadingFile" name="uploadingFile"}}<br /><br />	
</script>


<script src="js/libs/jquery-1.9.1.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.0/handlebars.min.js"></script>
<script src="http://builds.emberjs.com/ember-latest.js"></script>
<script src="http://builds.emberjs.com/ember-data.prod.js"></script>
<script src="js/libs/moment.js"></script>
<script src="js/plugins/jquery.valideater.js"></script>
<script src="js/plugins/VC-RequestAnimFrame.js"></script>
<script src="js/plugins/jQuery.VC-Slider.js"></script>
<script src="js/app.js"></script>
<script src="js/routes.js"></script>
<script src="js/models.js"></script>
<script src="js/views.js"></script>
<script src="js/controllers.js"></script>



<script>
$( document ).ready(function() {
  	// iterate through each form
	// $('form').each(function () {
	// 	var form = $(this);
	// 	if ($('[data-valideater]', form).length) {
	// 
	// 		// valideat each one
	// 		form.valideater();
	// 		// if(window.console) console.log('Initialising Valideater ... for ' + form.attr('id'));
	// 	}
	// });
});
</script>

</body>
</html>
