<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Design Tool</title>
	<link rel="stylesheet" href="css/scaffolding.css">
	<link rel="stylesheet" href="css/normalize.css">  
	<link rel="stylesheet" href="css/style.css">
</head>
<body>

<script type="text/x-handlebars">
	<header>
		<div class="row">
			<div class="sixcol">
				<a class="brand" href="#">Design tool</a>
				<nav>
					{{#linkTo 'projects'}}Projects{{/linkTo}}
				</nav>
			</div>
			<div class="sixcol">
				<form id="header-search">
					<input type="search">
					<input type="submit" value="Search">
				</form>
				{{#linkTo 'projects.new'}}Add a project{{/linkTo}}
				<!-- {{#linkTo 'upload' classNames="upload"}}Upload{{/linkTo}} -->
			</div>
		</div>
	</header>

    {{outlet}}
</script>

<script type="text/x-handlebars" id="projects">
	<div class="row projects-list">
		<h2>Projects</h2>
		<ul>
		{{#each model}}
			<li class="project-thumb">
				{{#linkTo 'project' this}}
					<img {{bindAttr src="image"}}>
					<h3 class="project-title">{{title}}</h3>
				{{/linkTo}}
			</li>
		{{/each}}
		</ul>
	</div>
	
	{{outlet}}
</script>

<script type="text/x-handlebars" id="project">
	<div id="overlay" class="dark">
		<div class="project">
			<form {{action save on="submit"}}>	
				<h1>{{title}}</h1>
				<h2>by {{author}}</h2>
				<p>{{category}}</p>
				<p>{{date publishedAt}}</p>
				
				{{#if isEditing}}
					{{partial 'project_fields'}}
					<button {{action 'doneEditing'}}>Done</button>
				{{else}}
					<button {{action 'edit'}}>Edit</button>
				{{/if}}
		
				<img {{bindAttr src="image"}} >
			    <!-- <button type="submit">Save project</button>--><br/>
				<button class="delete" {{action destroyRecord}}>Delete project</button>
			</form>	
			<footer>
				{{#linkTo 'projects' classNames="back"}}Back{{/linkTo}}
				
				<ul class="img-nav">
					<li><a href="#">Previous</a></li>
					<li><a href="#">Next</a></li>
				</ul>
				
			</footer>
			
		</div>
	</div>
</script>


<script type="text/x-handlebars" id="projects/new">
	<div id="overlay">
		<div class="new-project-form">
			{{#linkTo 'projects' classNames="close"}}Close{{/linkTo}}
			<form {{action save on="submit"}} id="new">
				<h2>Create a new project</h2>
				{{partial "project_fields"}}
				<button type="submit">Save project</button>
			</form>
		</div>
	</div>
</script>


<script type="text/x-handlebars" data-template-name="_project_fields">

	{{view App.TextField valueBinding="title" id="title" placeholder="Title" data-valideater="required" required="required"}}<br />
	{{view App.TextField valueBinding="author" id="author" placeholder="Author" data-valideater="required"}}<br />
	{{view App.TextField valueBinding="category" id="category" placeholder="Category" data-valideater="required"}}<br />
	{{view App.TextField valueBinding="image" id="image" placeholder="Image uri"}}<br/>
</script>


<script type="text/x-handlebars" id="upload">
	<div class="upload">
		<h1>Upload file here</h1>
	</div>
</script>



<script src="js/libs/jquery-1.9.1.js"></script>
<script src="js/libs/handlebars-1.0.0-rc.3.js"></script>
<script src="js/libs/ember.js"></script>
<script src="js/libs/ember-data.js"></script>
<script src="js/libs/showdown.js"></script>
<script src="js/libs/moment.js"></script>
<script src="js/plugins/jquery.valideater.js"></script>
<script src="js/app.js"></script>
<script src="js/routes.js"></script>
<script src="js/models.js"></script>
<script src="js/controllers.js"></script>

<script>
$( document ).ready(function() {
  	// iterate through each form
	$('form').each(function () {
		var form = $(this);
		if ($('[data-valideater]', form).length) {

			// valideat each one
			form.valideater();
			// if(window.console) console.log('Initialising Valideater ... for ' + form.attr('id'));
		}
	});
});
</script>

</body>
</html>
